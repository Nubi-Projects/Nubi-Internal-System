@model IEnumerable<HRSystem.Models.PermissionRequest>
@using Microsoft.AspNet.Identity
@{
    ViewBag.Title = "Index";
    HRSystem.Manager.RequestManager mngr = new HRSystem.Manager.RequestManager();
}

<h2>@Resources.NubiHR.Permissions</h2>

 

@if (ViewBag.per)
{
    <a href="@Url.Action("Create","PermissionRequest")" class="btn btn-primary">@Resources.NubiHR.Create</a>
}
else
{
    <a href="@Url.Action("Create","PermissionRequest")" class="btn btn-primary disabled">@Resources.NubiHR.Create</a>
}


<br />

    <table id="assets-data-table" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>
                    @Resources.NubiHR.EmployeeName
                </th>
                <th>
                    @Resources.NubiHR.RequestDate
                </th>
                <th>
                    @Resources.NubiHR.TimeFrom
                </th>

                <th>
                    @Resources.NubiHR.TimeTo
                </th>

                <th>
                    @Resources.NubiHR.PermissionDate
                </th>

                <th>
                    @Resources.NubiHR.PermissionType
                </th>

                <th>
                    @Resources.NubiHR.Note
                </th>

                <th>
                    @Resources.NubiHR.Actions
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Where(e => e.IsDeleted == false).ToList())
            {
                <tr onclick="Edit('@item.Id')">
                    <td>
                        @Html.DisplayFor(modelItem => item.Employee.FirstName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.RequestDate)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.TimeFromHours) : @Html.DisplayFor(modelItem => item.TimeFromMinutes)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.TimeToHours) : @Html.DisplayFor(modelItem => item.TimeToMinutes)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.PermissionDate)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.PermissionType.Type)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.Note)
                    </td>

                    <td>
                        @Html.ActionLink(Resources.NubiHR.Edit, "Edit", new { id = item.Id }) |
                        @Html.ActionLink(Resources.NubiHR.Details, "Details", new { id = item.Id })
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <script>
    function Edit(itemid) {

        window.location.href = "/PermissionRequest/Edit/" + itemid;
    }
</script>
@*<script type="text/javascript">
     $(document).ready(function () {
    var IsArabic = '@Request.Cookies["culture"].Value';
            IsArabic = (IsArabic === 'ar');
            $('#assets-data-table').DataTable({
                "language": {
                    "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                }
            });
     });
</script>*@