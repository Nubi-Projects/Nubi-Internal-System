@model IEnumerable<HRSystem.Models.AttendanceSheet>
@{
    ViewBag.Title = Resources.NubiHR.AllAttendanceSheets;
    var i = 1;
}


<br />


<div class="form-group">
    @Html.Label(Resources.NubiHR.StartDate, new { @class = "control-label col-md-2" })
    <div class="col-md-10">
        @*@Html.Editor("StartDate", new { type = "date", id = "StartDate", new { htmlAttributes = new { @class = "form-control" } })*@
        <input id="StartDate" type="date" name="StartDate" class = "form-control">
        @*@Html.ValidationMessage("StartDate", "", new { @class = "text-danger" })*@
    </div>
</div>

<div class="form-group">
    @Html.Label(Resources.NubiHR.EndDate, htmlAttributes: new { @class = "control-label col-md-2" })
    <div class="col-md-10">
        @*@Html.Editor("EndDate", new { htmlAttributes = new { @class = "form-control" } })*@
        <input id="EndDate" type="date" name="EndDate" class="form-control">
        @*@Html.ValidationMessage("max", "", new { @class = "text-danger" })*@
    </div>
</div>




<div class="row">
    <div class="col-md-12">
        <div class="panel panel-primary list-panel" id="list-panel">
            <div class="panel-heading list-panel-heading">
                <h2 class="panel-title list-panel-title">@Resources.NubiHR.AllEmployees</h2>
            </div>
            <div class="panel-body">
                <table id="assets-data-table" class="table table-striped table-bordered ReportPage" style="width:100%">

                    <thead>
                        <tr>
                            <th>@Resources.NubiHR.NoOfRow </th>
                            <th>@Resources.NubiHR.FunctionalNumber</th>
                            <th>@Resources.NubiHR.EmployeeName</th>
                            <th>@Resources.NubiHR.PunchTime</th>
                            <th>@Resources.NubiHR.WorkState</th>
                            <th>@Resources.NubiHR.NoOfHours</th>
                            <th>@Resources.NubiHR.RemainingHours</th>

                        </tr>
                    </thead>

                    <tbody>
                        @if (Model == null)
                        {
                        }
                        else
                        {
                            foreach (var item in Model)
                            {
                                <tr>
                                   
                                    <td>@i</td>

                                    <td> @item.Number</td>

                                    <td>@item.Name </td>

                                    <td>@item.PunchTime</td>

                                    <td>@item.WorkState</td>

                                    <td>@item.NoOfHours</td>

                                    <td>@item.RemainingHours</td>
                                </tr>
                                i++;
                            }
                        }
                        
                    </tbody>

                </table>
            </div>
        </div>
    </div>
</div>

@*<script src="~/Scripts/moment.min.js"></script>*@

<script type="text/javascript">
    
    $.fn.dataTable.ext.search.push(
        function (settings, data, dataIndex) {

            try {
                var min = $('#StartDate').val();
                var max = $('#EndDate').val();
                

                // use data for the punch time column
                var DateOfCurrentRow = data[3].substring(0, 10); 

                if ((min == "" && max == "") ||
                    (min == "" && DateOfCurrentRow <= max) ||
                    (min <= DateOfCurrentRow && max == "") ||
                    (min <= DateOfCurrentRow && DateOfCurrentRow <= max)) {
                    return true;
                }
                return false;
            }
            catch (err) {
                alert(err);
                $('#StartDate').val() = "";
                $('#EndDate').val() = "";

            }
          
        }
    );

    $(document).ready(function () {
        
        // Event listener to the two range filtering inputs to redraw on input

        $('#StartDate, #EndDate').change(function () {
            var table = $('#assets-data-table').DataTable();
            table.draw();
        });
    });


 
</script>
