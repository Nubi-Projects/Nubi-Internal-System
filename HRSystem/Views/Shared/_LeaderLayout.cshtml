@using Microsoft.AspNet.Identity
@{
    HRSystem.Manager.Helper helperx = new HRSystem.Manager.Helper();
    HRSystem.Manager.RequestManager mngr = new HRSystem.Manager.RequestManager();
    string Lang = Request.Cookies["culture"].Value;
    var IsArabic = Request.Cookies["culture"].Value == "ar" ? true : false;
    var VacRequests = mngr.NoOfLeaderVacationRequests();
    var PerRequests = mngr.NoOfLeaderPermissionRequests();
    ViewBag.LeaderHasSeenVac = mngr.HasLeaderSeenVacationRequests();
    ViewBag.LeaderHasSeenPer = mngr.HasLeaderSeenPermissionRequests();
    var Sum = VacRequests + PerRequests;

}
<!DOCTYPE html>
<html dir=" @(Request.Cookies["culture"].Value == "ar"? "rtl" : "ltr" )">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="~/Content/image/nubi.png" />

    <title>@ViewBag.Title - @Resources.NubiHR.HRSystem</title>
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.0.13/css/all.css'>
    @*<link href="~/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />*@
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">



    <link href="~/Scripts/sweetalert.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/style.css">
    <link href="~/Content/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="~/Scripts/DataTables/Buttons-1.5.1/css/buttons.bootstrap.css" rel="stylesheet" />
    <link href="~/Scripts/DataTables/Buttons-1.5.1/css/buttons.dataTables.css" rel="stylesheet" />
    <link href="~/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/modernizr-2.6.2.js"></script>
    <script src="~/Scripts/jquery-3.0.0.js"></script>
    <script src="~/Scripts/dataTables.bootstrap.min.js"></script>
    <script src="~/Scripts/jquery.dataTables.min.js"></script>

    <script src="~/Scripts/sweetalert2.1.0.min.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/dataTables.buttons.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/buttons.bootstrap.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/buttons.flash.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/buttons.print.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/buttons.html5.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/pdfmake.min.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/vfs_fonts.js"></script>
    <script src="~/Scripts/DataTables/Buttons-1.5.1/js/jszip.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js"></script>

    @*<script type="text/javascript">
            $(document).ready(function () {
                var IsArabic = '@Lang';
                IsArabic = (IsArabic === 'ar');
                $('#assets-data-table').dataTable({
                    "language": {
                        "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                    }
                });
            });
        </script>*@
</head>
<body>
    @if (@TempData["check"] != null)
    {

        <div class="alert alert-danger text-center">
            <strong> @TempData["check"] </strong>
        </div>


    }

    @if (TempData["checkk"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["checkk"] </strong>
        </div>
    }

    @if (@TempData["chec"] != null)
    {

        <div class="alert alert-success text-center">
            <strong> @TempData["chec"] </strong>
        </div>


    }

    @if (@TempData["vac"] != null)
    {

        <div class="alert alert-danger text-center">
            <strong> @TempData["vac"] </strong>
        </div>


    }

    @if (@TempData["CheckFatherDeathVacation"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["CheckFatherDeathVacation"] </strong>
        </div>
    }

    @if (@TempData["CheckMotherDeathVacation"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["CheckMotherDeathVacation"] </strong>
        </div>
    }

    @if (@TempData["checkHours"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["checkHours"] </strong>
        </div>
    }

    @if (@TempData["checkPermission"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["checkPermission"] </strong>
        </div>
    }

    @if (@TempData["AccidentalLeave"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["AccidentalLeave"] </strong>
        </div>
    }
    @if (@TempData["AccLeave"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["AccLeave"] </strong>
        </div>
    }
    @if (@TempData["normal"] != null)
    {
        <div class="alert alert-danger text-center">
            <strong> @TempData["normal"] </strong>
        </div>
    }
    @if (TempData["Edit"] != null)
    {
        <div class="alert alert-success text-center">
            <strong> @TempData["Edit"] </strong>
        </div>
    }
    <div class="page-wrapper chiller-theme toggled">
        <a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
            <i class="fas fa-bars"></i>
        </a>
        <nav id="sidebar" class="sidebar-wrapper">
            <div class="sidebar-content">
                <div class="sidebar-brand">
                    <a href="#"><span style="color:#eea904">HR</span>system</a>
                    <div id="close-sidebar">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
                <div class="sidebar-header">
                    <div class="user-pic">
                        <img class="img-responsive img-rounded" src="https://raw.githubusercontent.com/azouaoui-med/pro-sidebar-template/gh-pages/bootstrap4/assets/img/user.jpg" alt="User picture">
                    </div>
                    <div class="user-info">
                        @helperx.GetName(User.Identity.GetUserId()).Employee.FirstName
                        <strong>@helperx.GetName(User.Identity.GetUserId()).Employee.LastName</strong>
                        
                        <span class="user-role">@helperx.GetUserRole(User.Identity.GetUserId())</span>
                        <span class="user-status">
                            <i class="fa fa-circle"></i>
                            <span>Online</span>
                        </span>
                    </div>
                </div>
                <!-- sidebar-header  -->
                <div class="sidebar-search">
                    <div>
                        <div class="input-group">
                            <input type="text" class="form-control search-menu" placeholder="Search...">
                            <div class="input-group-append">
                                <span class="input-group-text">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- sidebar-search  -->
                <div class="sidebar-menu">
                    <ul>
                        <li class="header-menu">
                            @{

                                if (!IsArabic)
                                {
                                    @Html.ActionLink("العربية", "ChangeLanguage", "Base", new { lang = "ar" }, new { @class = "btnlang" }) <text> </text>
                                    <link rel="stylesheet" href="~/Content/style.css">
                                }
                                else if (IsArabic)
                                {
                                    @Html.ActionLink("English", "ChangeLanguage", "Base", new { lang = "en-GB" }, new { @class = "btnlang" }) <text> </text>
                                    <link rel="stylesheet" href="~/Content/StyleAr.css" />
                                }
                            @*<li>

                            </li>*@

                            }
                        </li>
                       
                        @*<li class="">
                            <a href="@Url.Action("Index","Home")">
                                <i class="fa fa-tachometer-alt"></i>
                                <span>@Resources.NubiHR.HRSystem</span>*@
                                @*<span class="badge badge-pill badge-danger">New</span>*@
                            @*</a>*@
                            @*<div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="#">
                                            Dashboard 1
                                            <span class="badge badge-pill badge-success">Pro</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">Dashboard 2</a>
                                    </li>
                                    <li>
                                        <a href="#">Dashboard 3</a>
                                    </li>
                                </ul>
                            </div>*@
                        @*</li>*@

                        <li class="">
                            <a href="@Url.Action("Index","VacationRequest")">
                                <i class="fa fa-tachometer-alt"></i>
                                <span>@Resources.NubiHR.VacationRequests</span>
                            </a>
                        </li>
                        <li class="">
                            <a href="@Url.Action("Index","PermissionRequest")">
                                <i class="fa fa-tachometer-alt"></i>
                                <span>@Resources.NubiHR.PermissionRequests</span>
                            </a>
                        </li>
                        <li class="sidebar-dropdown">
                            @{
                                if (IsArabic)
                                {
                                    <a href="#">
                                        <i class="fa fa-shopping-cart"></i>
                                        <span>@Resources.NubiHR.EmployeeRequests</span>
                                        @if ((ViewBag.LeaderHasSeenVac == true && ViewBag.LeaderHasSeenPer == true) || (VacRequests == 0 && PerRequests == 0))
                                        {

                                        }
                                        else
                                        {
                                            <span class="badge badge-pill badge-warning notification">
                                                @if (ViewBag.LeaderHasSeenVac == false && ViewBag.LeaderHasSeenPer == false)
                                                {
                                                    @Sum
                                                }
                                                else if (ViewBag.LeaderHasSeenVac == false && ViewBag.LeaderHasSeenPer == true)
                                                {
                                                    @VacRequests
                                                }
                                                else if (ViewBag.LeaderHasSeenVac == true && ViewBag.LeaderHasSeenPer == false)
                                                {
                                                    @PerRequests
                                                }

                                            </span>
                                        }
                                    </a>

                                }
                                else
                                {
                                    <a href="#">
                                        <i class="fa fa-shopping-cart"></i>
                                        <span>@Resources.NubiHR.EmployeeRequests</span>
                                        @if ((ViewBag.LeaderHasSeenVac == true || ViewBag.LeaderHasSeenPer == true) || (VacRequests == 0 && PerRequests == 0))
                                        {

                                        }
                                        else
                                        {
                                            <span class="badge badge-pill badge-warning notification">
                                                @if (ViewBag.LeaderHasSeenVac == false && ViewBag.LeaderHasSeenPer == false)
                                                {
                                                    @Sum
                                                }
                                                else if (ViewBag.LeaderHasSeenVac == false && ViewBag.LeaderHasSeenPer == true)
                                                {
                                                    @VacRequests
                                                }
                                                else if (ViewBag.LeaderHasSeenVac == true && ViewBag.LeaderHasSeenPer == false)
                                                {
                                                    @PerRequests
                                                }

                                            </span>
                                        }


                                    </a>
                                }
                            }
                            
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="@Url.Action("LeaderRequests","VacationRequest")">
                                            @Resources.NubiHR.VacationRequests
                                        </a>
                                        @if (ViewBag.LeaderHasSeenVac == true || VacRequests == 0 )
                                        {

                                        }
                                        else
                                        {
                                            <span class="badge badge-pill badge-warning notification">@VacRequests </span>
                                        }
                                        
                                    </li>
                                    <li>
                                        <a href="@Url.Action("LeaderRequests","PermissionRequest")">
                                            @Resources.NubiHR.PermissionRequests
                                        </a>
                                        @if (ViewBag.LeaderHasSeenPer == true || PerRequests == 0)
                                        {

                                        }
                                        else
                                        {
                                            <span class="badge badge-pill badge-warning notification">@PerRequests </span>
                                        }
                                        
                                    </li>
                                </ul>
                            </div>
                        </li>

                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-shopping-cart"></i>
                                <span>@Resources.NubiHR.NewRequest</span>

                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="@Url.Action("Create","VacationRequest")">
                                            @Resources.NubiHR.NewVacationRequest
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Create","PermissionRequest")">
                                            @Resources.NubiHR.NewPermissionRequests
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        @*<li class="sidebar-dropdown">
                            <a href="@Url.Action("Register","Account")">
                                <i class="far fa-gem"></i>
                                <span>Create New Account</span>
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="#">General</a>
                                    </li>
                                    <li>
                                        <a href="#">Panels</a>
                                    </li>
                                    <li>
                                        <a href="#">Tables</a>
                                    </li>
                                    <li>
                                        <a href="#">Icons</a>
                                    </li>
                                    <li>
                                        <a href="#">Forms</a>
                                    </li>
                                </ul>
                            </div>
                        </li>*@
                        @*<li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-chart-line"></i>
                                <span>Charts</span>
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="#">Pie chart</a>
                                    </li>
                                    <li>
                                        <a href="#">Line chart</a>
                                    </li>
                                    <li>
                                        <a href="#">Bar chart</a>
                                    </li>
                                    <li>
                                        <a href="#">Histogram</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-globe"></i>
                                <span>Maps</span>
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="#">Google maps</a>
                                    </li>
                                    <li>
                                        <a href="#">Open street map</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="header-menu">
                            <span>Extra</span>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-calendar"></i>
                                <span>Calendar</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-folder"></i>
                                <span>Examples</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-book"></i>
                                <span>Documentation</span>
                            </a>
                        </li>
                    </ul>
                </div>*@
                <!-- sidebar-menu  -->
            </div>
            <!-- sidebar-content  -->
            <div class="sidebar-footer">
                @*<a href="#">
                    <i class="fa fa-bell"></i>
                    <span class="badge badge-pill badge-warning notification">@VacRequests </span>
                </a>
                <a href="#">
                    <i class="fa fa-envelope"></i>
                    <span class="badge badge-pill badge-success notification">@PerRequests</span>
                </a>
                <a href="#">
                    <i class="fa fa-cog"></i>
                    <span class="badge-sonar"></span>
                </a>*@
                <a href="@Url.Action("Login","Account")">
                    <span>@Resources.NubiHR.Logout</span>
                    <i class="fa fa-power-off"></i>
                </a>
            </div>
        </nav>
        <!-- sidebar-wrapper  -->
        @*.....*@
        @*<nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">

                <a class="navbar-brand" href="#"><span class="text-uppercase text-dark">hr</span>system</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ml-auto">
                        <li role="presentation" class="nav-item"><a href="@Url.Action("Index","Home")" class="nav-link">HR System</a></li>
                        <li role="presentation" class="nav-item"><a href="@Url.Action("Report","Employee")" class="nav-link">Reports</a></li>
                        <li role="presentation" class="nav-item"><a href="@Url.Action("Register","Account")" class="nav-link">Create Account</a></li>*@

        @*.....*@
        @*@Html.ActionLink(@Resources.NubiHR.HRSystem, "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
            @Html.ActionLink(@Resources.NubiHR.Report, "Report", "Employee", new { area = "" }, new { @class = "navbar-brand" })
            @Html.ActionLink(@Resources.NubiHR.CreateAccount, "Register", "Account", new { area = "" }, new { @class = "navbar-brand" })*@
        @*.....*@
        @*@{
            foreach (var i in HRSystem.Manager.LanguageManager.AvailableLanguages)
            {
                <li*@ @*@Html.ActionLink(i.LanguageFullName, "ChangeLanguage", "Employee", new { lang = i.LanguageCultureName }, new { @class = "" })*@ @*class="nav-item"><a href="@Url.Action( "ChangeLanguage", "Employee")" class="nav-link">@i.LanguageFullName</a></li>
                                        }
                                    }
                                </ul>

                                <div class="navbar-collapse collapse">
                                    <ul class="nav navbar-nav"></ul>
                                </div>
                            </div>
                        </div>
                    </nav>*@
                @*.......*@
                <main class="page-content">
                    <div class="container">
                        @RenderBody()
                    </div>
                    <footer class="col-md-8">
                        <p>&copy; @DateTime.Now.Year - Powered by Nubi IT Service</p>
                    </footer>
                </main>
            </div>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
            @*<script src="~/Scripts/bootstrap.min.js"></script>*@
            <script src="~/Scripts/jquery.validate.js"></script>
            <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
            <script src="~/Scripts/moment.min.js"></script>
            <script src="~/Scripts/index.js"></script>
    <script>
        $(document).ready(function () {
            var IsArabic = '@Request.Cookies["culture"].Value';
        IsArabic = (IsArabic === 'ar');

        if ($('#assets-data-table').hasClass("ReportPage")) {
            $('#assets-data-table').DataTable({
                dom: 'lBfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "language": {
                    "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                }
            });
        }
        else {
            $('#assets-data-table').DataTable({
                "language": {
                    "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                }
            });
        }
        });

        $(document).ready(function () {
    var IsArabic = '@Request.Cookies["culture"].Value';
            IsArabic = (IsArabic === 'ar');

            if ($('#assets-data-table1').hasClass("ReportPage")) {
                $('#assets-data-table1').DataTable({
                    dom: 'lBfrtip',
                    buttons: [
                        'copy', 'csv', 'excel', 'pdf', 'print'
                    ],
                    "language": {
                        "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                    }
                });
            }
            else {
                $('#assets-data-table1').DataTable({
                    "language": {
                        "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                    }
                });
            }
        });

        $(document).ready(function () {
    var IsArabic = '@Request.Cookies["culture"].Value';
            IsArabic = (IsArabic === 'ar');

            if ($('#assets-data-table2').hasClass("ReportPage")) {
                $('#assets-data-table2').DataTable({
                    dom: 'lBfrtip',
                    buttons: [
                        'copy', 'csv', 'excel', 'pdf', 'print'
                    ],
                    "language": {
                        "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                    }
                });
            }
            else {
                $('#assets-data-table2').DataTable({
                    "language": {
                        "url": IsArabic ? "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json" : "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json"
                    }
                });
            }
     });
    </script>

    @*<script>
        $(document).ready(function () {
            $('#startdate_datepicker').datepicker();

            $('#btn').click(function (e) {
                e.preventDefault();
                $('#startdate_datepicker').datepicker("show");
                setTimeout(function () {
                    $('#startdate_datepicker').datepicker("hide");
                }, 1000)
            })

        });

        $(document).ready(function () {
            $('#enddate_datepicker').datepicker();

            $('#btn1').click(function (e) {
                e.preventDefault();
                $('#enddate_datepicker').datepicker("show");
                setTimeout(function () {
                    $('#enddate_datepicker').datepicker("hide");
                }, 1000)
            })

        });

        $(document).ready(function () {
            $('#resumedate_datepicker').datepicker();

            $('#btn2').click(function (e) {
                e.preventDefault();
                $('#resumedate_datepicker').datepicker("show");
                setTimeout(function () {
                    $('#resumedate_datepicker').datepicker("hide");
                }, 1000)
            })

        });
    </script>*@
    @*//$("#startdate_datepicker").datepicker();
    //$("#enddate_datepicker").datepicker();
    //$("#resumedate_datepicker").datepicker();*@
    
        </body>
    </html>